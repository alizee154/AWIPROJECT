<h2>Ajouter une fiche technique : </h2>



<div class="row">
  <div class="col-sm-8 col-sm-offset-2">
    <!--<form (ngSubmit)="onSubmit(f)"  #f="ngForm">-->
      <form [formGroup]="recetteForm" (ngSubmit)="onSubmitForm()">
        <div class="form-group">
          <label for="id">
            Identifiant :
          </label>
          <input type="text" id="id"  class="form-control"  formControlName="id">
        </div>
        <div class="form-group">
          <label for="name">
            Nom du plat :
          </label>
          <input type="text" id="name" class="form-control" formControlName="name">
        </div>
        <div class="form-group">
          <label for="author">
            Auteur :
          </label>
          <input type="text" id="author" class="form-control"  formControlName="author">
        </div>
        <div class="form-group">
          <label for="desc">
            Description :
          </label>
          <input type="text" id="desc" class="form-control" formControlName="desc">
        </div>


  <div formArrayName="tags">
    <div *ngFor=" let tag of tags.controls; let i=index let k = index">
      <div [id]="i" >
        <label [attr.for]="i">{{'etape'+i}}</label>
        <div class="form-group" >

          <label for="title" >
            {{'Titre de l\'étape :' + i}}
          </label>
          <input type="text" id="title"placeholder="{{'Titre de l\'étape :' + i}}" class="form-control"  [formControlName]="i">
        </div>
        <div class="form-group">
          <label for="time">
            Temps nécessaire :
          </label>
          <input type="text" id="time" class="form-control" [formControlName]="k">
        </div>


        <div class="form-group" *ngFor=" let ing of ings.controls; let j=index">
          <label [attr.for]="j">{{'Ingrédient ' + j}} </label>
          <select class="form-control" [id]="j"  [formControlName]="j">
            <option [ngValue]="null">Select Option</option>
            <option *ngFor="let ingredient of ingredients" >{{ingredient.name}}</option>


          </select>
          <div class="form-group">
            <label for="quantity">
              Quantité :
            </label>
            <input type="text" id="quantity" class="form-control" [formControlName]="j">
          </div>
        </div>


      </div>
    </div>
  </div>
        <div style="text-align:center">
          <div [innerHtml]='msg' *ngIf="msg" style="color: red;"></div>
          <div formControlName="url"><img [src]="url" *ngIf="url"></div>
          <p>
            <input type="file" (change)="selectFile($event)">
          </p>
        </div>
      <button class="btn btn-danger" type ="button" (click)="addIngs()">+   Ajouter un ingrédient</button>
      <button class="btn btn-danger" type ="button" (click)="addSteps()" >+   Ajouter une étape</button>
      <button class="btn btn-dark" type="submit">Enregistrer</button>

    </form>
  </div>
</div>
